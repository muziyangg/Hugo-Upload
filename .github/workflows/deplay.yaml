name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]
  workflow_dispatch:  # 移除了 pull_request 触发，因为通常不需要为 PR 部署 Pages

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pages: write
      id-token: write
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: Setup Pages
        uses: actions/configure-pages@v4
        
      # 只保留一个 artifact 上传步骤，并确保路径正确
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # 指定实际的构建输出目录，通常是 'public', 'dist' 或 '_site' 等
          # 根据你的项目修改这个路径
          path: '.'
          
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
    